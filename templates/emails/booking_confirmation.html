<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flight Booking Confirmation</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 20px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 28px;
            font-weight: 300;
        }
        .content {
            padding: 30px;
        }
        .booking-id {
            background-color: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 5px 5px 0;
        }
        .section {
            margin: 25px 0;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background-color: #fafafa;
        }
        .section h3 {
            color: #2c3e50;
            margin: 0 0 15px 0;
            font-size: 18px;
            display: flex;
            align-items: center;
        }
        .section h3::before {
            content: "‚úàÔ∏è";
            margin-right: 10px;
        }
        .flight-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }
        .flight-route {
            background: white;
            padding: 15px;
            border-radius: 5px;
            border-left: 3px solid #4CAF50;
        }
        .route-info {
            display: flex;
            align-items: center;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        .route-info .arrow {
            margin: 0 10px;
            color: #666;
        }
        .passenger-list {
            background: white;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .passenger-item {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .passenger-item:last-child {
            border-bottom: none;
        }
        .price-summary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin: 20px 0;
        }
        .price-amount {
            font-size: 32px;
            font-weight: bold;
            margin: 10px 0;
        }
        .status-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
            background-color: #fff3cd;
            color: #856404;
        }
        .footer {
            background-color: #2c3e50;
            color: white;
            text-align: center;
            padding: 20px;
        }
        .footer p {
            margin: 5px 0;
        }
        .contact-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }
        .contact-item {
            background: white;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
        }
        .special-requests {
            background: #fff9c4;
            border: 1px solid #f7dc6f;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        @media (max-width: 600px) {
            .flight-details {
                grid-template-columns: 1fr;
            }
            .contact-info {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üéâ Flight Booking Confirmed!</h1>
            <p>Thank you for choosing our service</p>
        </div>

        <!-- Content -->
        <div class="content">
            <div class="booking-id">
                <h2 style="margin: 0; color: #1976d2;">Booking ID: #{{ booking.id }}</h2>
                <p style="margin: 5px 0 0 0;">Status: <span class="status-badge">{{ booking.status|title }}</span></p>
            </div>

            <p>Dear <strong>{{ client_name }}</strong>,</p>
            <p>Your flight booking request has been successfully submitted. Here are your booking details:</p>

            <!-- Flight Details -->
            <div class="section">
                <h3>Flight Information</h3>
                {% for leg in flight_legs %}
                <div class="flight-route">
                    <div class="route-info">
                        <span>{{ leg.departure_airport.icao_code }}</span>
                        <span class="arrow">‚Üí</span>
                        <span>{{ leg.arrival_airport.icao_code }}</span>
                        {% if leg.sequence == 1 %}
                            <span style="margin-left: 10px; color: #4CAF50; font-size: 12px;">(DEPARTURE)</span>
                        {% else %}
                            <span style="margin-left: 10px; color: #FF9800; font-size: 12px;">(RETURN)</span>
                        {% endif %}
                    </div>
                    <div style="color: #666; font-size: 14px;">
                        üìÖ {{ leg.departure_datetime|date:"F d, Y" }} at {{ leg.departure_datetime|time:"g:i A" }}
                    </div>
                    <div style="color: #666; font-size: 14px;">
                        ‚è±Ô∏è Flight Duration: {{ leg.flight_hours }} hours
                    </div>
                    <div style="color: #666; font-size: 14px;">
                        üí∞ Price: ${{ leg.leg_price|floatformat:2 }}
                    </div>
                </div>
                {% if not forloop.last %}<br>{% endif %}
                {% endfor %}
            </div>

            <!-- Aircraft Details -->
            <div class="section">
                <h3 style="color: #2c3e50;">üõ©Ô∏è Aircraft Information</h3>
                <div style="background: white; padding: 15px; border-radius: 5px;">
                    <strong>{{ booking.aircraft }}</strong>
                </div>
            </div>

            <!-- Passenger Information -->
            <div class="section">
                <h3>üë• Passenger Details</h3>
                <div class="passenger-list">
                    {% for passenger in passengers %}
                    <div class="passenger-item">
                        <strong>{{ forloop.counter }}. {{ passenger.name }}</strong>
                        {% if passenger.nationality %}
                            <span style="color: #666; margin-left: 10px;">({{ passenger.nationality }})</span>
                        {% endif %}
                        {% if passenger.passport_number %}
                            <div style="font-size: 12px; color: #666;">Passport: {{ passenger.passport_number }}</div>
                        {% endif %}
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Additional Services -->
            {% if catering_required or ground_transport %}
            <div class="section">
                <h3>üéØ Additional Services</h3>
                <div style="background: white; padding: 15px; border-radius: 5px;">
                    {% if catering_required %}
                        <div style="margin: 5px 0;">‚úÖ Catering Service Requested</div>
                    {% endif %}
                    {% if ground_transport %}
                        <div style="margin: 5px 0;">‚úÖ Ground Transport Requested</div>
                    {% endif %}
                </div>
            </div>
            {% endif %}

            <!-- Special Requests -->
            {% if booking.special_requests %}
            <div class="special-requests">
                <h4 style="margin: 0 0 10px 0; color: #f39c12;">üìù Special Requests</h4>
                <p style="margin: 0;">{{ booking.special_requests }}</p>
            </div>
            {% endif %}

            <!-- Price Summary -->
            <div class="price-summary">
                <h3 style="margin: 0;">Total Price</h3>
                <div class="price-amount">${{ booking.total_price|floatformat:2 }}</div>
                <p style="margin: 0; opacity: 0.9;">All taxes and fees included</p>
            </div>

            <!-- Contact Information -->
            <div class="section">
                <h3>üìû Your Contact Information</h3>
                <div class="contact-info">
                    <div class="contact-item">
                        <strong>üìß Email</strong><br>
                        {{ client_email }}
                    </div>
                    <div class="contact-item">
                        <strong>üì± Phone</strong><br>
                        {{ client_phone }}
                    </div>
                    {% if company_name %}
                    <div class="contact-item">
                        <strong>üè¢ Company</strong><br>
                        {{ company_name }}
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- Next Steps -->
            <div style="background: #e8f5e8; border: 1px solid #4CAF50; padding: 20px; border-radius: 8px; margin: 20px 0;">
                <h4 style="color: #2e7d2e; margin: 0 0 15px 0;">üìã What Happens Next?</h4>
                <ul style="margin: 0; padding-left: 20px; color: #2e7d2e;">
                    <li>Our team will review your booking within 24 hours</li>
                    <li>We'll contact you to confirm final details and payment</li>
                    <li>You'll receive final confirmation once everything is arranged</li>
                    <li>Enjoy your flight experience!</li>
                </ul>
            </div>

            <p>If you have any questions or need to make changes, please don't hesitate to contact us.</p>
            <p>Thank you for choosing our services!</p>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p><strong>Flight Booking Services</strong></p>
            <p>Professional Aviation Solutions</p>
            <p>¬© {{ "now"|date:"Y" }} All rights reserved</p>
        </div>
    </div>
</body>
</html>